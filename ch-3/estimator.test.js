/**
 * @jest-environment node
 */
import{onCovid19}from"on-covid-19";import estimator from"../../src/estimator.js";import{getImpactDataStructure,valueOnFields,mockEstimationFor}from"../test-utils.js";const cases=[["days","ch-3"],["weeks","ch-3"],["months","ch-3"]];describe("on-covid-19 >> Challenge-3",()=>{test.each(cases)("estimate current and projected infections, in %s",async(t,e)=>{const a=await mockEstimationFor(t),{data:o,estimate:s}=a.data,{periodType:c,timeToElapse:i}=o,r=await onCovid19(o,estimator).estimateImpactAfter(i)[c]();expect(r).toBeTruthy(),expect(r).toMatchObject(getImpactDataStructure(e)),valueOnFields(r,s,e).forEach(([t,e])=>{expect(t).toBe(e)})})});